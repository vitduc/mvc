<?php

/**
 * @var $block \Nsk\PartNumbersInterchange\Block\ResultList
 * @var Magento\Framework\Escaper $escaper
 */

$partNumberList = $block->getTableList();
$requestParam = $this->getRequest()->getParam('part_number');

?>

<?php if ($partNumberList === '' && isset($requestParam)) : ?>
    <h3 id="interchange-no-result"><?= $escaper->escapeHtml(__('No search result.')) ?></h3>
<?php else: ?>
    <?php if (($requestParam === '') || ($requestParam != '' && $partNumberList->getSize() == 0)) : ?>
        <h3 id="interchange-no-result"><?= $escaper->escapeHtml(__('No search result.')) ?></h3>
    <?php endif; ?>
<?php endif; ?>


<?php if ($partNumberList && $partNumberList->getSize() > 0) : ?>
    <h3 id="interchange-search-matching">
        <strong>
            <?= /* @noEscape */ $block->escapeHtml(
                __(
                    '%1 part numbers matching %2',
                    $partNumberList->getSize(),
                    $requestParam
                ),
                ['span']
            ) ?>
        </strong>
    </h3>
    <div class="nsk-table-interchange-result-list">
        <table id="nsk-interchange-result-list">
            <tr class="nsk-interchange-table-header">
                <th><?= $escaper->escapeHtml(__('Company')) ?></th>
                <th><?= $escaper->escapeHtml(__('Part Number')) ?></th>
                <th><?= $escaper->escapeHtml(__('NSK Part Number')) ?></th>
                <th><?= $escaper->escapeHtml(__('NSK Designation')) ?></th>
                <th><?= $escaper->escapeHtml(__('NSK Product Name')) ?></th>
                <th><?= $escaper->escapeHtml(__('Note')) ?></th>
            </tr>

            <?php foreach ($partNumberList as $item) : ?>
                <tr class="nsk-interchange-result-row-data">
                    <td>    <?= /* @noEscape */
                        $escaper->escapeHtml($item->getData('competitor')) ?></td>

                    <td> <?= /* @noEscape */
                        $escaper->escapeHtml($item->getData('part_number')) ?></td>

                    <td>
                        <?php if ($item->getData('sku') && $item->getData('request_path')) : ?>
                            <a href="<?= $block->getBaseUrl() . $item->getData('request_path') ?>">
                                <?= /* @noEscape */
                                $escaper->escapeHtml($item->getData('nsk_part_number')) ?>
                            </a>
                        <?php else: ?>
                            <?= /* @noEscape */
                            $escaper->escapeHtml($item->getData('nsk_part_number')) ?>
                        <?php endif; ?>
                    </td>
                    <td>
                        <?php if ($item->getData('group_product_request_path') && $item->getData('sku')) : ?>
                            <a href="<?= $block->getBaseUrl() . $item->getData('group_product_request_path') ?>">
                                <?= /* @noEscape */
                                $escaper->escapeHtml($item->getData('product_designation')) ?>
                            </a>
                        <?php else: ?>
                            <?= /* @noEscape */
                            $escaper->escapeHtml($item->getData('product_designation')) ?>
                        <?php endif; ?>
                    </td>
                    <td>  <?= /* @noEscape */
                        $escaper->escapeHtml($item->getData('product_name')) ?></td>
                    <td> <?= /* @noEscape */
                        $escaper->escapeHtml($item->getData('note')) ?></td>
                </tr>
            <?php endforeach; ?>
        </table>
    </div>


    <?php if ($block->getPagerHtml()): ?>
        <div id="interchange-result-pager"><?php echo $block->getPagerHtml(); ?></div>
    <?php endif ?>
<?php endif; ?>
